{% extends 'bootstrap/users/content.html' %}

{% block content_body %}
<div class="content-body body-main">
    <div class="user-contents">
        {% if session.user_id == user.id %}
            <div class="user-menu">
                <ul>
                    <li href="{{ url_for('users.edit_profile', id=user.id) }}">프로필 수정</li>
                    <li href="{{ url_for('users.edit_password', id=user.id) }}">비밀번호 변경</li>
                    {% if user.level !=2 %}
                        <li href="{{ url_for('users.edit_professional', id=user.id) }}">사업자로 변경</li>
                    {% else %}
                        <li href="{{ url_for('users.edit_professional_info', id=user.id) }}">사업자정보 수정</li>
                    {% endif %}
                </ul>
            </div>
        {% endif %}

        <div class="user-title">갤러리</div>
        <div class="cards">
            {% for photo in photos %}
                <div class="card" id="{{ photo.id }}"
                     style="background-image:url({{ url_for_s3('S3_IMG_DIRECTORY', filename=photo.file.name) }})">
                    {% if photo.is_vr  %}
                        <div class="card-media"><span class="vr-icon"></span></div>
                    {% elif photo.is_mov  %}
                        <div class="card-media"><span class="mov-icon"></span></div>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
        <div class="pagination-nav">
            {{ func.render_pagination('users.gallery', pagination, user.id) }}
        </div>
    </div>
</div>

<script>
$('.card').click(function() {
    document.location.href = "{{ url_for('photos.detail', id='') }}" + $(this).attr('id');
});

$('.user-menu li').click(function() {
    document.location.href = $(this).attr('href');
});
</script>
{% endblock %}
